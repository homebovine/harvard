Q
source("accleft.r")
resp
survData[97, 3]
source("accleft.r")
estm(theta, resp, covm, n, p)
mA
source("accleft.r")
source("accleft.r")
estm(theta, resp, covm, n, p)
missingscore(1, theta, missresp, cmptresp, mn, cn, p, misscovm, cmptcovm, cmptscore)
ht <- n^(-1/3)
hx = rep(ht, p)
hx
ht
ix
c
source("accleft.r")
estm(theta, resp, covm, n, p)
c
source("accleft.r")
estm(theta, resp, covm, n, p)
c
.Last.vlue
.Last.value
library(BB)
?dfsane
dfsane(theta, estm, method = 2, contorl = ls(), quiet = FALSE, resp, covm, n, p)
dfsane(theta, estm, method = 2, contorl = list(), quiet = FALSE, resp, covm, n, p)
dfsane(theta, estm, method = 2, control = list(), quiet = FALSE, resp, covm, n, p)
c
source("accleft.r")
source("accleft.r")
source("accleft.r")
source("accleft.r")
warnings()
source("accleft.r")
estm(theta, resp, covm, n, p)
cmptscore
str(cmpscore)
str(cmptscore)
cmptscore
temp <- lapply(1 : cn,completescore, theta, cmptresp, cn, p, cmptcovm, cmptv)
temp[1]
debug(projscore)
completescore(1, theta, cmptresp, cn, p, comptcovm, cmptv)
completescore(1, theta, cmptresp, cn, p, cmptcovm, cmptv)
n
a
sapply(1:m, num, vg, vt, x, theta, v)
n
n
sapply(1:m, num, vg, vt, x, theta, v)
sapply(1 : m, dm, vg, vt, x,   theta, v)
Q
source("accleft.r")
estm(theta, resp, covm, n, p)
 apply(rbind(cmptscore, missscore), 2, sum)
cmptscore
str(compscore)
completescore(1, theta, cmptresp, cn, p, cmptcovm, cmmptv)
completescore(1, theta, cmptresp, cn, p, cmptcovm, cmptv)
debug(completescore)
m
completescore(1, theta, cmptresp, cn, p, cmptcovm, cmptv)
debug(projscore)
n
n
n
n
n
n
n
a
n
Q
source("accleft.r")
estm(theta, resp, covm, n, p)
 apply(rbind(cmptscore, missscore), 2, sum)
cmptscore
str(cmptscore)
missscore
cmptscore[ix, ]* kerx(x, cmptcovm[ix, ], ht)
debug(missingscore)
missscore <- do.call(rbind, lapply(1 : mn, missingscore, theta, missresp, cmptresp, mn, cn, p, misscovm, cmptcovm, cmptscore, missv))
n
n
n
n
n
n
n
ix
n
n
n
n
n
n
n
n
n
ix
n
n
n
n
n
n
n
n
n
n
ix
cn
cmptresp[, "y1"]
n
n
ix
missscore
mn
q
missscore
score
theta
Q
source("accleft.r")
spg(theta, estm, gr=NULL, method=3, project=NULL, lower=rep(0.001, length(theta)), upper=Inf, projectArgs=NULL, control=list(), quiet=FALSE, resp, covm, n, p)
source("accleft.r")
source("accleft.r")
warnings()
estm1
estm1
estm
theta
load("/Users/fjiang/harv/harvard/accleft/realresult")
apply(resmale, 2, median)
apply(resfemale, 2, median)
load("realdata")
survsd <- sd(survData[, c(1, 3)])
survData <- survData[survData[, 5] == 0, 1:4]
survData[, c(1, 3)] <- survData[, c(1, 3)]/survsd
survData[, c(1, 3)]
datafemale <- survData
load("realdata")
survData[, c(1, 3)] <- survData[, c(1, 3)]/survsd
survData <- survData[survData[, 5] == 1, 1:4]
survData[, c(1, 3)] <- survData[, c(1, 3)]/survsd
survData
datamale <- survData
save(datamale, datafemale, resmale, resfemale, file = "realresult")
load("realresult")
 apply(resmale, 2, median
)
 paramale <- apply(resmale, 2, median)
 parafemale <- apply(resfemale, 2, median)
parafemale
ls()
data <- cbind(datamale, datafemale)
data <- rbind(datamale, datafemale)
exp(log(data[, 1])/paramale[1])
exp(log(data[, 1])/paramale[1])* exp(paramale[4])
plot(exp(log(data[, 1])/paramale[1])* exp(paramale[4])~data[, 1])
plot(exp(log(data[, 3])/paramale[2])* exp(paramale[5])~data[, 3])
lines(exp(log(data[, 1])/paramale[1])* exp(paramale[4])~data[, 1])
plot(exp(log(data[, 3])/paramale[2])* exp(paramale[5])~data[, 3])
points(exp(log(data[, 1])/paramale[1])* exp(paramale[4])~data[, 1])
points(exp(log(data[, 3])/paramale[3])* exp(paramale[6])~data[, 3])
plot(exp(log(data[, 3])/parafemale[2])* exp(parafemale[5])~data[, 3])
points(exp(log(data[, 1])/parafemale[1])* exp(parafemale[4])~data[, 1])
points(exp(log(data[, 3])/parafemale[3])* exp(parafemale[6])~data[, 3])
points(exp(log(data[, 3])/parafemale[3])* exp(parafemale[6])~data[, 3], col = "blue")
parafemale
paramale
load("/Users/fjiang/harv/harvard/accleft/pc.Rdata")
pc
 ls()
str(PC)
attach(PC)
sum(race_nowhite)
sum(race_noWhite)
sum(los3w)
subpc <- PC[Age >= 1, ]
nrow(subpc)
sum(subpc$los3w)
sum(subpc$disch_snf)
sum(subpc$risk4_)
sum(subpc$risk2_3)
sum(subpc$disch_homecare)
load("/Users/fjiang/harv/harvard/accleft/realdata")
ls()
survData[, 4]
sum(survData[, 4])
457/621
sum(survData[, 2])
survData[, 2]
load("/Users/fjiang/harv/harvard/accleft/pc.Rdata")
str(PC)
sum(PC$delta1)
mean(PC$delta1)
90/621
attach(PC)
sum(Age <= 0.5)
sum(Age <= 0)
sum(Age <= 0, delta1 = 1)
sum(Age <= 0, delta1 == 1)
sum(Age <= 0&delta1 == 1)
sum(Age <= -0.5&delta1 == 1)
sum(Age <= -0.5)
sum(Age <= -2)
sum(Age <= -2.5)
summary(Age)
sum(Age <= -2.6)
sum(Age <= -2.6&delta1 == 1)
421 /1185
sum(survData[, 4])
457/621
load("realdata)
")
load("/Users/fjiang/harv/harvard/accleft/realdata")
survData
sd(survData[, c(1, 3))
sd(survData[, c(1, 3)])
load("realdata")
ls()
survDara[, c(1, 3)] <-  survDara[, c(1, 3)]/sd( survDara[, c(1, 3)])
survData[, c(1, 3)] <-  survData[, c(1, 3)]/sd( survData[, c(1, 3)])
plot(density(survdata[survData[, 2]==1, 3]))
plot(density(survData[survData[, 2]==1, 3]))
plot(density(log(survData[survData[, 2]==1, 3])))
plot(density(log(survData[survData[, 2]==1, 3]/5)))
plot(density(((survData[survData[, 2]==1, 3])^2 - 1)/2))
plot(density((log(survData[survData[, 2]==1, 3])^2 - 1)/2))
plot(density((log(survData[survData[, 2]==1, 3])^1/2 - 1)/0.5))
load("realdata")
plot(density(survData[survData[, 2]==1, 3]))
plot(density(log(survData[survData[, 2]==1, 3]/5)))
log(log(survData[, 3]))
load("realresult")
survData
ls()
load("realdata")
mean(survData[, 2])
mean(survData[, 4])
load("/Users/fjiang/harv/harvard/accleft/realresult")
summary(res115)
load("/Users/fjiang/harv/harvard/accleft/resleft")
plot(res115)
source("xufunleft.r")
plot(res115)
summary(res115)
ls()
plot(res152)
temp <- rbind(summary(res0305)$fullresult, summary(res05084)$fullresult, summary(res08511)$fullresult, summary(res115)$fullresult, summary(res152)$fullresult)
plot(temp[, 12])
source("xufunleft.r")
load("rescen")
summary(rescen0305)$fullres
likelihood <- rbind(summary(rescen0305)$fullres, summary(rescen05084)$fullres, summary(rescen08511)$fullres, summary(rescen1115)$fullres, summary(rescen057)$fullres)[, 12]
likelihood <- rbind(summary(rescen0305)$fullres, summary(rescen05084)$fullres, summary(rescen08511)$fullres, summary(rescen1115)$fullres, summary(rescen067)$fullres)[, 12]
likelihood <- rbind(summary(rescen0305)$fullres, summary(rescen05084)$fullres, summary(rescen08511)$fullres, summary(rescen1115)$fullres, summary(rescen67)$fullres)[, 12]
x <- c(seq(0.3, 0.5, 0.02), seq(0.5, 0.84, 0.02), seq(0.85, 1.1, 0.02), seq(1.1, 1.5, 0.02), seq(6, 7, 0.02))
plot(likelihood~x, type = "l", ylab = "likelihood", xlab = quote(theta))
plot(lowess(likelihood~x), type = "l", ylab = "likelihood", xlab = quote(theta))
plot(likelihood[x>=6] ~ x[x>= 6], type = "l")
plot(lowess(likelihood[x>=6] ~ x[x>= 6]), type = "l")
plot(lowess(likelihood~x), type = "l", ylab = "likelihood", xlab = quote(theta))
plot(likelihood ~x, type = "l")
summary(res0305)
summary(rescen0305)
survData[, 5:7]
summary(rescen67)
load("survData1")
survData1[1:250, ]
mean(survData1[1:250, 2])
table(survData1[,c(2, 4)])
table(survData1[,c(2)], survData[, 4])
table(survData1[1:250,c(2)], survData1[1:250, 4])
str(survData1)
str(survData1)
str(myData)
str(myDdata)
covm <- myDdata[, 4:9]
str(covm
)
sum(complete.cases(myDdata$EnrollAge)))
sum(complete.cases(myDdata$EnrollAge))
sum(complete.case[, 1:9])
sum(complete.cases(myDdata[, 1:9]))
sum(complete.cases(myDdata[, 1]))
sum(complete.cases(myDdata[, 2]))
sum(complete.cases(myDdata[, 3]))
sum(complete.cases(myDdata[, 4]))
sum(complete.cases(myDdata[, 5]))
sum(complete.cases(myDdata[, 6]))
sum(complete.cases(myDdata[, 7]))
sum(complete.cases(myDdata[, 8]))
sum(complete.cases(myDdata[, 9]))
sum(complete.cases(myDdata[, 1 :9]))
myData <- myDdata[complete.cases(myDdata[, 1 :9])), ]
myData <- myDdata[complete.cases(myDdata[, 1 :9]),] 
str(myData
)
max(myData$YearEnrolled)
attach(myData)
sum(d1)
d2
sum(d2)
str(myData)
str(YearEnrolled)
str(myData)
is.na(DiagnosisAge)&is.na(AgeAtDeath)
YearEnrolled[is.na(DiagnosisAge)&is.na(AgeAtDeath)] 
2013 - YearEnrolled[is.na(DiagnosisAge)&is.na(AgeAtDeath)] 
str(myData)
y1
y1
sum(y1 <= y2)
sum(y1 > y2)
y2
str(myData)
sum(y1 <= y2)
str(myData)
str(survData)
table(gender)
table race
table(race)
1701/4049
table(race)/4049
summary(survData$education)
sd(survData$education)
summary(marital)
table(marital)
table(marital)/4049
summary(CESD_Score)
sd(CESD_Score)
str(myData)
apoe_raw
table(apoe_raw)
table(apoe_raw)/4049
survfit(SurvData(survData[, 1], survData[, 2])~1)
survfit(Surv(survData[, 1], survData[, 2])~1)
plot(survfit(Surv(survData[, 1], survData[, 2])~1))
mean(survData[, 2])
mean(survData[, 4])
coxph(Surv(survData[, 1], survData[, 2])~., data.frame(survData[, ))
str(survData)
coxph(Surv(survData[, 1], survData[, 2])~., data.frame(survData[, 5:10]))
plot(survfit(Surv(survData[, 1], survData[, 4])~1))
plot(survfit(Surv(survData[, 1], survData[, 4])~1), xlim = c(60, 100))
plot(survfit(Surv(survData[, 1], survData[, 4])~1), xlim = c(60, 105))
coxph(Surv(survData[, 1], survData[, 2])~., data.frame(survData[, ), xlim = c(60, 105))
plot(survfit(Surv(survData[, 1], survData[, 2])~1), xlim = c(60, 105))
coxph(Surv(survData[, 1], survData[, 4])~., data.frame(survData[, ))
coxph(Surv(survData[, 1], survData[, 4])~., data.frame(survData[, 5:10] )
)
plot(survfit(Surv(survData[, 3], survData[, 4])~1), xlim = c(60, 105))
coxph(Surv(survData[, 3], survData[, 4])~., data.frame(survData[, 5:10] )
)
 save(survData, file = "survData")
q()
y
load("survData")
ls()
str(survData)
survData[survData[, 6] == 4|survData[, 6] == 5|survData[, 6] == 6, 6] <- 4
as.factor(survData[, 6])
str(survData)
survData[survData[, 10]!= "", 10] <- 1
survData[survData[, 10]!= "", 10] <- "1"
sum(survData[, 10]!= "")
str(survData[, 10]
)
as.numeric(survData[, 10])
)
survData[, 10]
str(survData[, 10])
survData[1, 10]
survData[2, 10]
load("survData")
survData[survData[, 6] == 4|survData[, 6] == 5|survData[, 6] == 6, 6] <- 4
str(survData)
survData[, 10]
as.numeric(survData[, 10])
survData[3, 10]
as.numeric(survData[3, 10])
survData[, 10]<- as.numeric(survData[, 10])
survData[survData[, 10]!= 1, 10] <- 2
survData[survData[, 10]== 1, 10] <- 0
survData[survData[, 10]!= 1, 10] <- 1
survData[, 10]
load("survData")
survData[survData[, 6] == 4|survData[, 6] == 5|survData[, 6] == 6, 6] <- 4
survData[, 10] <- as.numeric(survData[, 10])
survData[survData[, 10]!= 1, 10] <- 2
survData[survData[, 10]== 1, 10] <- 0
survData[survData[, 10]== 2, 10] <- 1
survData[, 10]
survData[, 10]<- as.factor(survData[, 10])
survData[, "race"] <- as.factor(survData[, "race"])
str(survData)
survData[survData[, 8] != 1, 8] <- 0
sum(survData[, 1] > 89)
survData[survData[, 3] > 89, 4] <- 0
survData[survData[, 3] > 89, 3] <- 89
survData[survData[, 1] > 89, 2] <- 0
survData[survData[, 1] > 89, 1] <- 89
sum(survData[, 1] <= survData[, 3])
table(survData[, "race"])
table(survData[, "race"])/4049
table(survData[, "maried"])
str(survData)
table(survData[, "marital"])
table(survData[, "marital"])/4049
table(survData[, 10])
table(survData[, 10])/4049
library(survival)
str(survData)
 -0.018 + 0.08 * 1.96
 -0.018 - 0.08 * 1.96
str(myDdata)
table(myDdata$education)
ls()
str(survData)
table(survData$race)
str(survData1)
library(survival)
table(survData$race)
table(survData$race)
table(survData$apoe_raw)
 table(as.numeric(survData$apoe_raw))
str(survData)
table(survData[, 10])
str(survData)
table(survData[, 10])
table(CESD_Score)
table(survData$CESD_Score)
table(survData$CESD_Score)
q()
n
str(survData)
survData1 <- survData
sum(survData[, 1]<= survData[, 3])
table(survData[, 9])
survData <- survData1
table(survData[, 9])
table(education)
str(survData)
table(survData$education)
table(survData[, 7])
survData[survData[, 7] == 15, 7]<- 1
table(survData[, 7])
table(survData)
as.factor(survData)
str(survData)
library(survival)
save(survData, file = "disurvData")
table(survData$race)
table(survData$apoe_raw)
nrow(survData)
attach(survData)
table(gender)
str(survData)
str(marital)
table(marital)
table(survData$marital)
save(survData, file = "disurvData")
attach(survData)
table(gender)
table(gender)/3344
nrow(survData)
table(race)
table(race)/3344
table(marital)
table(marital)/3344
table(CESD_Score)
table(CESD_Score)/3344
table(education)
table(education)/3344
table(apoe_raw)
table(apoe_raw)/3344
q()
y
library("survival")
str(survData)
q()
y
survData1
str(survData1)
str(myDdata)
myDdata$EnrollAge[myDdata$apoe_raw > 1]
str(myDdata$EnrollAge[as.numeric(myDdata$apoe_raw) > 1])
sum(complete.cases(myDdata))
sum(complete.cases(myDdata[, 1:10]))
str(myDdata)
sum(complete.cases(myDdata[, 3:8]))
myDdata <- myDdata[complete.cases(myDdata[, 3:8]), ]
str(myDdata$EnrollAge[as.numeric(myDdata$apoe_raw) > 1])
hist(myDdata$EnrollAge)
hist(myDdata$EnrollAge)
